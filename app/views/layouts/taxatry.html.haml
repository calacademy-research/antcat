- content_for :head do
  = javascript_include_tag 'taxatry/taxon_key'

- content_for :page_header do
  #navigation_bar
    = form_tag @current_path, :method => 'get', :id => 'search_form' do
      .actions.taxatry_view_selector
        - if controller.class.name =~ /Browser/
          = link_to 'Index view', index_taxatry_path(@taxon)
        - else
          %span Index view

        - if controller.class.name =~ /Index/
          = link_to 'Browser view', browser_taxatry_path(@taxon)
        - else
          %span Browser view

      .search
        Search for name
        = select_tag :search_type, options_for_select(['matching', 'beginning with', 'containing'], params[:search_type] || 'beginning with')
        = hidden_field_tag "id", params[:id]
        = text_field_tag "q", params[:q]
        = submit_tag  "Go"
        - if @search_results.present? && @search_results.size > 1
          = submit_tag "Clear"
        = @search_results_message
  = render 'shared/catalog_title'

- content_for :page_contents do
  = render 'taxatry/search_results', :search_results => @search_results, :taxon => @taxon, :path => :browser_taxatry_path
  = yield
  = render 'taxatry/taxon_key'

= render :file => 'layouts/application'
