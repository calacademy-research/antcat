!!!
%html{xmlns: 'http://www.w3.org/1999/xhtml', 'xml:lang' => 'en', lang: 'en'}

  %head
    %title= make_title @title
    %meta{'http-equiv' => "content-type", content: "text/html;charset=UTF-8"}

    = csrf_meta_tag

    -# FOUC fix
    %style{type: 'text/css'}=".js #flash {display:none;}"

    :javascript
      if (typeof AntCat === 'undefined') AntCat = {};
      AntCat.environment = '#{Rails.env}';
      AntCat.testing = #{Rails.env == 'test'};
      AntCat.user_can_edit_references = #{!!user_can_edit_references?};
      AntCat.user_can_edit_catalog = #{!!user_can_edit_catalog?};
      AntCat.delete_confirmation_message = "#{previewize('Do you want to delete this reference?')}";

    = javascript_include_tag 'google_analytics' if Rails.env == 'production' && $Milieu.production?
    = javascript_include_tag 'application'

    = stylesheet_link_tag 'blueprint/screen', media: 'screen, projection'
    = stylesheet_link_tag 'blueprint/print', media: 'print'
    /[if IE]
      = stylesheet_link_tag 'blueprint/ie', media: 'screen, projection'

    = stylesheet_link_tag 'application'
    = stylesheet_link_tag 'ext/jquery.ui.custom.css'
    = stylesheet_link_tag 'jquery.ui.custom.custom.css'
    = stylesheet_link_tag controller.class.to_s.demodulize.gsub('Controller', '').underscore

    = favicon_link_tag

    = yield :head

  %body#flash{class: controller.class}
    #page
      #site_header
        = render 'shared/site_header'

      #page_header
        - if content_for? :page_header
          = yield :page_header
        - else
          %h2.title= @title
      %hr

      - if flash[:notice].present?
        #page_notice= flash[:notice]
      - if flash[:alert].present?
        #page_alert= flash[:alert]

      #page_contents
        = content_for?(:page_contents) ? yield(:page_contents) : yield
      %hr

      #site_footer
        = render 'shared/site_footer'

      :javascript
        $('#flash').show(); // FOUC fix
      /[if IE]
        = stylesheet_link_tag 'ie_antcat'
