- url = url_for @taxon
- method = @taxon.persisted? ? 'put' : 'post'
.taxon_form#taxon_form.ui-widget{style: {display: 'none'}, 'data-action' => url, 'data-method' => method}

  = fields_for @taxon do |taxon_form|

    .name_section.section
      %table.ui-dialog-content.ui-widget-content.ui-corner-all
        %tr
          = taxon_form.fields_for :name do |name_form|
            %td.label= name_form.label :name
            %td
              %span.name= name_form.text_field :name
              %span.ancestry= "Genus < Tapinomini < Dolichoderinae"
        %tr
          %td.label= taxon_form.label :status
          %td
            = taxon_form.select :status, Status.statuses

            = taxon_form.check_box :fossil
            = taxon_form.label :fossil

            = taxon_form.check_box :unidentifiable
            = taxon_form.label :unidentifiable

            = taxon_form.check_box :unresolved_homonym
            = taxon_form.label :unresolved_homonym, 'Unresolved junior homonym'

            = taxon_form.check_box :hong
            = taxon_form.label :hong

        %tr
          %td.label= taxon_form.label :headline_notes_taxt, 'Notes'
          %td
            %span.notes= taxon_form.text_area :headline_notes_taxt, rows: 1

    .protonym_section.section
      .section_header.ui-widget-header.ui-corner-top
        Protonym
      = taxon_form.fields_for :protonym do |protonym_form|
        %table.ui-dialog-content.ui-widget-content.ui-corner-bottom
          %tr
            = protonym_form.fields_for :name do |name_form|
              %td.label= name_form.label :name, 'Name'
              %td
                %span.name= name_form.text_field :name
                = protonym_form.check_box :fossil
                = protonym_form.label :fossil

                = protonym_form.check_box :sic
                = protonym_form.label :sic

          %tr
            = protonym_form.fields_for :authorship do |authorship_form|
              %td.label= authorship_form.label :reference
              %td
                %span.authorship= authorship_form.text_field :reference
                = authorship_form.label :pages
                %span.pages= authorship_form.text_field :pages

    .type_section.section
      .section_header.ui-widget-header.ui-corner-top
        Type
      %table.ui-dialog-content.ui-widget-content.ui-corner-bottom
        %tr
          %td.label= taxon_form.label :type_name, 'Name'
          %td
            %span.name= taxon_form.text_field :type_name
            = taxon_form.check_box :type_fossil
            = taxon_form.label :type_fossil, 'Fossil'

        %tr
          %td.label= taxon_form.label :type_taxt, 'Notes'
          %td
            %span.taxt= taxon_form.text_area :type_taxt, rows: 1

    -#.history_section.section
      -#.section_header.ui-widget-header.ui-corner-top
        -#History
      -#.ui-dialog-content.ui-widget-content.ui-corner-bottom
        -#History items

    -#.references_section.section
      -#.section_header.ui-widget-header.ui-corner-top
        -#References
      -#.ui-dialog-content.ui-widget-content.ui-corner-bottom
        -#Reference items

    -#%table.synonym_homonym_section.section
      -#%tr
        -#%td
          -#.synonym_section
            -#.section_header.ui-widget-header.ui-corner-top
              -#Synonyms
            -#.ui-dialog-content.ui-widget-content.ui-corner-bottom
              -#Synonym items

        -#%td
          -#.homonym_section.ui-corner-all
            -#.section_header.ui-widget-header.ui-corner-top
              -#Homonym
            -#.ui-dialog-content.ui-widget-content.ui-corner-bottom
              -#Homonym fields

    .buttons_section
      = taxon_form.submit 'OK', class: 'ui-priority-primary submit'
      %input{type: 'button', class: 'ui-priority-secondary cancel', value: 'Cancel'}
