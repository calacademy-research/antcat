-# Locals: taxon
.antcat_taxon

  .header
    %span{class: Formatters::CatalogFormatter.css_classes_for_rank(taxon)}= Formatters::CatalogFormatter.format_header_name taxon
    %span.status= Formatters::CatalogFormatter.format_status taxon

  .statistics= Formatters::CatalogFormatter.format_taxon_statistics taxon

  - if taxon.genus_species_header_note.present?
    .genus_species_header_note= Formatters::CatalogFormatter.format_genus_species_header_note taxon, current_user

  .headline= Formatters::CatalogFormatter.format_headline taxon, current_user

  - if taxon.taxonomic_history_items.present?
    .history
      - for history_item in taxon.taxonomic_history_items do
        = render 'catalog/history_item/panel', item: history_item

  .child_lists
    =Formatters::CatalogFormatter.format_child_lists_for_rank taxon, :subfamilies
    =Formatters::CatalogFormatter.format_child_lists_for_rank taxon, :tribes
    =Formatters::CatalogFormatter.format_child_lists_for_rank taxon, :genera

  - if taxon.reference_sections.present?
    .reference_sections
      - for reference_section in taxon.reference_sections do
        .section
          - [:title, :subtitle, :references].each do |field|
            - if reference_section[field].present?
              %div{class: field}= Taxt.to_string reference_section[field], current_user
