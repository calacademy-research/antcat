- @title = 'Catalog'

- content_for :head do
  = javascript_include_tag 'catalog', 'qtip'
  = javascript_include_tag 'ext/jquery.ui.selectmenu.js', 'ext/jquery.spinner.js'
  = stylesheet_link_tag 'ext/jquery.ui.selectmenu.css'

#catalog
  - can_add_genus = @tribe && @tribe != 'none'
  .content
    = render 'taxon', taxon: @taxon, user: current_user
    %hr

  .new_taxon_form
    = render 'catalog/taxon_form', tribe: @tribe if can_add_genus

  .index
    = render   'rank', rank: :subfamily,items: @subfamilies,selected_item: @subfamily, parent: nil,       options: {show_none: 'none', hideable_child_name: 'tribes'}
    - if @parameters[:show_tribes] and not @subfamily == 'none'
      = render 'rank', rank: :tribe,    items: @tribes,     selected_item: @tribe,     parent: @subfamily,options: {show_none: 'none', hideable_name: 'tribes'}
    = render   'rank', rank: :genus,    items: @genera,     selected_item: @genus,     parent: nil,       options: {hideable_child_name: 'subgenera'}
    - if @parameters[:show_subgenera]
      = render'rank',  rank: :subgenus, items: @subgenera,  selected_item: @subgenus,  parent: nil,       options: {hideable_name: 'subgenera'}
    = render  'rank',  rank: :species,  items: @specieses,  selected_item: @species,   parent: nil,       options: {}

= render 'shared/qtip'
