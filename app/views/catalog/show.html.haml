- @title = 'Catalog'

- content_for :head do
  = javascript_include_tag 'catalog', 'qtip'
  = javascript_include_tag 'ext/jquery.ui.selectmenu.js', 'ext/jquery.spinner.js'
  = stylesheet_link_tag 'ext/jquery.ui.selectmenu.css'

#catalog
  - can_add_genus = @tribe && @tribe != 'none'
  .content
    = render 'taxon', taxon: @taxon, user: current_user
    %hr

  .new_taxon_form
    = render 'catalog/taxon_form', tribe: @tribe if can_add_genus

  .index
    = render   'rank', rank: :subfamily,items: @subfamilies, selected_item: @subfamily, page_parameters: @page_parameters, options: {show_none: 'none', hideable_child_name: 'tribes'}
    - unless @subfamily == 'none' || params[:hide_tribes]
      = render 'rank', rank: :tribe,    items: @tribes,      selected_item: @tribe,     page_parameters: @page_parameters, options: {show_none: 'none', hideable_name: 'tribes'}

    = render   'rank', rank: :genus,    items: @genera,      selected_item: @genus,     page_parameters: @page_parameters, options: {hideable_child_name: 'subgenera'}

    - unless params[:hide_subgenera]
      = render   'rank', rank: :subgenus, items: @subgenera,   selected_item: @subgenus,  page_parameters: @page_parameters, options: {hideable_name: 'subgenera'}

    = render   'rank', rank: :species,  items: @specieses,   selected_item: @species,   page_parameters: @page_parameters, options: {}

= render 'shared/qtip'
